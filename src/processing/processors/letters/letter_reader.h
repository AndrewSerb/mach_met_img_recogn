#ifndef LETTER_READER_H
#define LETTER_READER_H

#include <unordered_map>

#include "../../common_processors.h"

namespace LetterReader
{
constexpr double LONG_PERCENTAGE = 0.8;

static const std::unordered_map<char, LetterData::LinesMetrics> etalons = {
    {'.', {{1, -1, 1}, {1, -1, 1}}},

    {'a', {{1, 2, 1, 2, 3, 4, 3, 2, 1}, {1, 2, 3, 1}}},
    {'b', {{1, 2, 1, 2, 3, 2, 1}, {1, 2, 1}}},
    {'c', {{1, 2, 1, 2, 1}, {1, 2, 1}}},
    {'d', {{1, 2, 1, 2, 3, 2, 3, 2}, {1, 2, 3, -1, 1}}},
    {'e', {{1, 2, -1, 1, 2, 1}, {1, 3, 2}}},
    {'f', {{1, 2, 1}, {1, 2, -1, 3, 2, 1}}},
    {'g', {{1, 2, 1, 2, 1, 2, 1}, {1, 2, 3, 4, 3, 4, 3, 4, 3, 4, 3, 2, 1}}},
    {'h', {{1, 2, 1, 2, 3, 2}, {1, 2, -1, 2, 1, 2, -1, 1}}},
    {'i', {{1, 2, 1, -1}, {1, 2, -1}}},
    {'j', {{-1, 2, -1, 1, 2, 1}, {1, -1, 2, 1}}},
    {'k', {{1, 2, 1, 2, 1, 2}, {2, -1, 2, 1, 2, 4, 3, 2, -1, 1}}},
    {'l', {{1, 2, 1, -1}, {1, 2, -1}}},
    {'m', {{3, 5, 3}, {1, 2, -1, 2, 1, 2, -1, 2, 1, 2, -1, 3, -1}}},
    {'n', {{1, 2, 3, 4, 3, 2}, {1, 2, -1, 2, 1, 2, -1}}},
    {'o', {{1, 2, 1}, {1, 2, 1}}},
    {'p', {{1, 2, 3, 2, 3, 2, 1}, {1, 2, -1, 3, 2, 1}}},
    {'q', {{2, 1, 2, 3, 2, 1, -1, 1}, {1, 2, 3, -1, 1}}},
    {'r', {{1, 2, 4, 3, 1}, {1, 2, -1, 2, 1}}},
    {'s', {{2, 1, 2, 1, 2, 1, 2, 1}, {2, 3, 2, 1}}},
    {'t', {{1, 2, 1}, {1, -1, 2, 1}}},
    {'u', {{2, 3, 4, 3, 2}, {1, -1, 1, 2, -1, 1}}},
    {'v', {{2, 1}, {1, 2, 1, -1, 1, 2, 1}}},
    {'w', {{3, 4, 3, 2}, {1, 2, 1, -1, 1, 2, 1, 2, 1, -1, 1, 2, 1}}},
    {'x', {{2, 1, 2}, {1, 2, 3, 2, 3, 2, 1, 3, 4, 3, 2, -1}}},
    {'y', {{2, 1, 2, 1}, {1, 2, 3, 2, 1, 2, 1}}},
    {'z', {{-1, 1, 2, 1, 2, 1}, {-1, 2, 3, 2, 1}}},

    {'A', {{1, 2, 1, 2}, {-1, 2, 1, 2, 1, -1}}},
    {'B', {{1, 2, 1, 2, 1}, {1, 2, 1, 3, 4, 3, 2, 1}}},
    {'C', {{1, 2, 1, 2, 1}, {1, 2}}},
    {'D', {{2, 1, 2, 1}, {1, 2, 1, 2, 1}}},
    {'E', {{2, 1, 2, 1, 2, 1, 2, 1, 2, 1}, {1, 2, 1, 3, 2, 1}}},
    {'F', {{2, -1, 1, 2, 1, 2, 1, 2, 1}, {1, 2, -1, 3, 2, 1}}},
    {'G', {{1, 2, 1, 2, 1}, {1, 2, 3, 2, 1}}},
    {'H', {{4, 2, 1, 2}, {1, 2, -1, 2, 1, 2, -1, 2}}},
    {'I', {{2, 1, -1}, {2, -1, 2, -1}}},
    {'K', {{4, 2, 1, 2}, {1, 2, -1, 3, 2, 1, 2, 3, 2, -1}}},
    {'L', {{2, 1, 2, 1}, {1, 2, 1, 2, 1, -1, 1}}},
    {'M', {{1, 2, 3, 4, 3, 2}, {-1, 2, 1, -1}}},
    {'N', {{3, 2, 3, 2}, {-1, 2, 1, 2, 1, -1, 1}}},
    {'P', {{2, 1, 2, 1}, {1, 2, -1, 2, 1, 2, 1}}},
    {'Q', {{1, 2, 3, 2, 1, 2, 1}, {1, 2, 3, 2, 1, -1, 1}}},
    {'R', {{1, 2, 1, 2}, {2, -1, 3, 2, 3, 2, 1, -1}}},
    {'S', {{1, 2, 1, -1, 1, 2, 1}, {1, 2, 3, 2, 1}}},
    {'T', {{2, -1, 3, 2, 1}, {1, 2, -1, 2, 1}}},
    {'V', {{2, 1}, {1, 2, 1, -1, 1, 2, 1}}},
    {'X', {{1, 2, 1, 2}, {-1, 2, 3, 2, 3, 2, 1, 2, 3, 2, -1}}},
    {'Y', {{2, 1}, {1, 2, -1, 2, 1, 2, 1}}},
    {'Z', {{1, 2, 1, 2, 1}, {-1, 2, 3, 2, 1}}}
};

void detect(LetterData& letter, const ImageData& image);
}

#endif // LETTER_READER_H
